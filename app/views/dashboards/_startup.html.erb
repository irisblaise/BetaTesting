<div class=banner2>
  <h1 class="h1-header">Hey <%= current_user.first_name&.capitalize %></h1>
  <h2>Welcome to your dashboard!</h2>
  <div class="w-100 d-flex justify-content-center">
    <%= link_to "Add test!",  new_startup_version_path(current_user.startup), {class: "search-btn btn mt-3 btn-outline-light"} %>
  </div>
</div>

<% if current_user.empty_profile? %>
<div class="w-100 d-flex justify-content-center my-3">
  <div class="alert-profile alert-warning" role="alert">
    Your profile is not completed.
    <%= link_to "update!",  edit_startup_path(current_user), {class: "btn btn-succes"} %>
  </div>
</div>
<% end %>


<div class="container mt-5">

  <div class="main-container d-flex text-center justify-content-center">

    <!-- user profile box, same for startup and tester -->
    <div class="user-profilev2">

      <div class="user-photo">
        <%= cl_image_tag current_user.startup.photo.attached? ? current_user.startup.photo.key : "injcuuecln8fvf2vo2zg", width: 500, height: 350, :cloud_name => "dir0nw4ok"%>
      </div>

      <div class="user-info text-left">

        <h6 style="font-weight:700">Company information</h6>
        <div>Owner: <%= current_user.first_name.capitalize %> <%= current_user.last_name.capitalize %></div>
        <div>Company: <%= current_user.startup.company_name %> </div>
        <div>Website: <%= current_user.startup.url %></div>
        <div>About: <%= current_user.startup.description&.capitalize %></div>
        <div>Sector: <%= current_user.startup.sector %></div>

        <h6 style="font-weight:700">Your target market</h6>
        <p>Age: <%= current_user.startup.target_age.join(", ") %></p>
        <p>Eduction: <%= current_user.startup.target_education.join(", ") %></p>
        <p>Nationality: <%= current_user.startup.target_nationality.join(", ") %></p>
        <p>Rating: <%= current_user.startup.target_rating.join(", ") %></p>
        <p>Profession: <%= current_user.startup.target_profession.join(", ") %></p>
        <p>Gender: <%= current_user.startup.target_sex.join(", ") %> </p>
      </div>

      <div class="user-contact text-left">
        <span>Email: <%= current_user.email %></span>
      </div>
      <div class="padding-top-30 ">
        <%= link_to "Edit Profile", edit_startup_path(current_user), {class: "card_action btn btn-primary"}  %>
      </div>
    </div>

    <div class="stats-card-1" style="height:300px">
      <h1>Total Number of Testers: <%= @versions.last.testers.count %></h1>
    </div>

    <div class="stats-card-1" style="height:300px">
      <h1>Average Score: <%= @versions.last.feedbacks.count %></h1>
    </div>

  </div>

    <div class="stats-card-1">
      <%= render 'chartjs' %>
    </div>


<div>
  <!-- Nav tabs -->
  <ul class="nav nav-tabs" role="tablist">
    <button id="answers-per-user-button" class="card_action btn btn-primary">
      <li role="presentation"><a href="#answers-per-user" aria-controls="answers-per-user" role="tab" data-toggle="tab">Anwers per user</a></li>
    </button>
    <button id="answers-per-question-button" class="card_action btn btn-primary" hidden>
      <li role="presentation"><a href="#answers-per-question" aria-controls="answers-per-question" role="tab" data-toggle="tab">Answers per question</a></li>
    </button>
  </ul>
  <br>

  <!-- Tab panes -->
  <div class="tab-content">
    <div id="answers-per-user" hidden>
      <div role="tabpanel" class="tab-pane" id="answers-per-user"><%= render 'versions/tester_answers' %></div>
    </div>
    <div id="answers-per-question" >
      <div role="tabpanel" class="tab-pane" id="answers-per-question"><%= render 'versions/tabbed_accordion' %></div>
    </div>
  </div>
</div>

<!-- script that toggles between buttons and hides the answers per question button
  when that view is selected, and vice versa -->
  <script>
    document.getElementById("answers-per-user-button").addEventListener("click", function() {
      document.getElementById("answers-per-user").hidden = false;
      document.getElementById("answers-per-question").hidden = true;
      document.getElementById("answers-per-user-button").hidden = true;
      document.getElementById("answers-per-question-button").hidden = false;
    }, false);

    document.getElementById("answers-per-question-button").addEventListener("click", function() {
      document.getElementById("answers-per-user").hidden = true;
      document.getElementById("answers-per-question").hidden = false;
      document.getElementById("answers-per-user-button").hidden = false;
      document.getElementById("answers-per-question-button").hidden = true;
    }, false);
  </script>
</div>
